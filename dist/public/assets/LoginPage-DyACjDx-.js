import{b as n,d as v,o as w,a as l,w as s,Q as d,e as V,u as x,f as i,g as _,h as m,i as f,j as p,k as Q,l as b,m as h,n as y}from"./index-DopTafnW.js";import{Q as q}from"./QForm-4AOh3GZx.js";import{C}from"./ClosePopup-B9pXPU_N.js";const P={class:"flex flex-center bg-grey-1",style:{"min-height":"100vh"}},N={__name:"LoginPage",setup(S){const o=n(""),r=n(!1),u=n("admin"),g=x();function c(){y.login(u.value,o.value,a=>{if(a.success&&a.data){localStorage.setItem("loggedIn","true");const e=new Date().toISOString().split("T")[0];localStorage.setItem("loginDate",e),g.replace("/")}else(!a.success||!a.data)&&(r.value=!0)})}return(a,e)=>(w(),v("div",P,[l(d,{class:"q-pa-lg column q-gutter-md",style:{width:"100%","max-width":"400px"}},{default:s(()=>[e[3]||(e[3]=i("div",{class:"text-h5 text-center"},"Login",-1)),l(q,{onSubmit:_(c,["prevent"]),ref:"formRef",class:"column q-gutter-md"},{default:s(()=>[l(m,{outlined:"",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),label:"Phone number",dense:"",class:"full-width",rules:[t=>!!t||"Phone number is required"]},null,8,["modelValue","rules"]),l(m,{outlined:"",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value=t),label:"Password",type:"password",dense:"",class:"full-width",rules:[t=>!!t||"Password is required"]},null,8,["modelValue","rules"]),l(f,{label:"Login",color:"primary",class:"full-width",type:"submit"})]),_:1},512)]),_:1,__:[3]}),l(V,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t)},{default:s(()=>[l(d,null,{default:s(()=>[l(p,null,{default:s(()=>e[4]||(e[4]=[i("div",{class:"text-h6"},"Alert",-1)])),_:1,__:[4]}),l(p,{class:"q-pt-none"},{default:s(()=>e[5]||(e[5]=[Q(" Username or password is incorrect. ")])),_:1,__:[5]}),l(b,{align:"right"},{default:s(()=>[h(l(f,{flat:"",label:"OK",color:"primary"},null,512),[[C]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{N as default};
