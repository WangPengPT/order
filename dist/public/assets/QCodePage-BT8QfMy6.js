import{b as t,d as C,o as s,a as r,$ as U,w as h,V as E,f,c as d,Z as u,h as i,i as V}from"./index-C5b5Sw8_.js";import{Q as B}from"./QPage-BlXTBeDH.js";import{C as g,Q as q}from"./CodeMaker-IOgtdCDu.js";import"./_commonjsHelpers-gnU0ypJ3.js";const _={key:1,class:"row"},$={class:"q-mb-md"},S={__name:"QCodePage",setup(D){const o=t(!1),c=t(0),v=t(""),p=t(0),n=t(""),m=t(null),k=t(!1),y=()=>{if(n.value){let a=window.env.QR_ADDR+g.SimpleEncode(n.value);console.log("The qrcode data: ",a),q.toCanvas(m.value,a,{width:300},e=>{e?console.error(e):k.value=!0})}},x=()=>{if(m.value){const a=document.createElement("a");a.download=`座号-${n.value}-二维码.png`,a.href=m.value.toDataURL("image/png"),a.click()}};async function Q(){const a=document.createElement("canvas");for(let e=c.value;e<=p.value;e++){const l=e<10?`0${e}`:`${e}`,w="https://sushi.xiaoxiong.pt"+v.value+"/client.html?table="+g.SimpleEncode(l);console.log("生成二维码数据: ",w),await q.toCanvas(a,w,{width:300});const b=document.createElement("a");b.download=`${l}.png`,b.href=a.toDataURL("image/png"),b.click(),await new Promise(R=>setTimeout(R,300))}console.log("全部二维码下载完毕")}return(a,e)=>(s(),C(E,null,[r(U,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),label:"一键"},null,8,["modelValue"]),r(B,{class:"flex flex-center column q-pa-md"},{default:h(()=>[e[5]||(e[5]=f("div",{class:"text-h4 q-mb-md"},"座号二维码生成器",-1)),o.value?u("",!0):(s(),d(i,{key:0,modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l),label:"请输入座号",outlined:"",class:"q-mb-md",style:{"min-width":"300px"},rules:[l=>!!l||"座号不能为空"]},null,8,["modelValue","rules"])),o.value?(s(),C("div",_,[r(i,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l),label:"请输入起始座号",outlined:"",class:"q-mb-md",style:{"min-width":"300px"},rules:[l=>!!l||"座号不能为空"]},null,8,["modelValue","rules"]),r(i,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=l=>p.value=l),label:"请输入最终座号",outlined:"",class:"q-mb-md",style:{"min-width":"300px"},rules:[l=>!!l||"座号不能为空"]},null,8,["modelValue","rules"])])):u("",!0),o.value?(s(),d(i,{key:2,modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=l=>v.value=l),label:"请输入地址",outlined:"",class:"q-mb-md",style:{"min-width":"300px"},rules:[l=>!!l||"地址不能为空"]},null,8,["modelValue","rules"])):u("",!0),o.value?u("",!0):(s(),d(V,{key:3,label:"生成二维码",color:"primary",class:"q-mb-md",onClick:y,disable:!n.value},null,8,["disable"])),o.value?(s(),d(V,{key:4,label:"一键生成下载二维码",color:"primary",class:"q-mb-md",onClick:Q})):u("",!0),f("div",$,[f("canvas",{ref_key:"qrCanvas",ref:m},null,512)]),k.value?(s(),d(V,{key:5,label:"下载二维码",color:"positive",icon:"download",onClick:x})):u("",!0)]),_:1,__:[5]})],64))}};export{S as default};
