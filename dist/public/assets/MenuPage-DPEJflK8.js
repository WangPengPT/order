import{b as f,B as D,n as w,d as B,o as M,f as r,a as u,w as i,e as j,V as I,h as o,C as R,Q as S,j as q,m as V,i as g,a1 as $}from"./index-C8ikGnLr.js";import{Q as A}from"./QTable-B8BzLM1b.js";import{Q as U}from"./QSpace-BGAocpY8.js";import{Q as E}from"./QToolbar-DsaHJS_4.js";import{C as Q}from"./ClosePopup-CeE9HMLe.js";import"./QField-Dnyc60LD.js";import"./QItem-Biy8VMPH.js";import"./QItemLabel-DQR-tuiZ.js";import"./format-CJebrXOQ.js";const N={class:"q-pa-md"},W={__name:"MenuPage",setup(P){const k=[{name:"id",required:!0,label:"id",align:"left",field:a=>a.id,format:a=>`${a}`,sortable:!0},{name:"name",required:!0,label:"name",align:"left",field:a=>a.name,format:a=>`${a}`,sortable:!0,style:"max-width: 50px;"},{name:"detail",required:!0,label:"detail",align:"left",field:a=>a.note,format:a=>`${a}`,sortable:!0,classes:"multiline-cell",style:{"max-width":"150px","white-space":"normal","word-break":"break-word"}}],v=f(!1),b=f([]),m=f(null),n=f({}),d=["name","note","subname"],p=["","_en","_cn"];function C(a,e){m.value=e,v.value=!0;for(let l=0;l<d.length;l++)n.value[d[l]]=e[d[l]],n.value[d[l]+"_en"]=e[d[l]+"_en"],n.value[d[l]+"_cn"]=e[d[l]+"_cn"];n.value.disable=e.disable||!1}function y(){console.log("apply dish");let a={},e=!1;for(let l=0;l<d.length;l++)for(let s=0;s<p.length;s++){const t=d[l]+p[s];m.value[t]!=n.value[t]&&(a[t]=n.value[t],e=!0)}if(m.value.disable?n.value.disable||(e=!0,a.disable=!1):n.value.disable&&(e=!0,a.disable=!0),e){for(let l=0;l<d.length;l++)for(let s=0;s<p.length;s++){const t=d[l]+p[s];m.value[t]=n.value[t]}m.value.disable=n.value.disable,a.id=m.value.id,w.updateMenuItem(a),console.log("update apply dish",a)}}return D(()=>{console.log("..... onMounted ..."),b.value=w.menuData,console.log(b.value)}),(a,e)=>(M(),B(I,null,[r("div",N,[u(A,{title:"Dishes",rows:b.value,columns:k,"row-key":"id",filter:a.filter,onRowClick:C},{"top-right":i(()=>[u(o,{borderless:"",dense:"",debounce:"300",modelValue:a.filter,"onUpdate:modelValue":e[0]||(e[0]=l=>a.filter=l),placeholder:"Search"},{append:i(()=>[u(R,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","filter"])]),u(j,{modelValue:v.value,"onUpdate:modelValue":e[11]||(e[11]=l=>v.value=l),"full-height":"","full-width":""},{default:i(()=>[u(S,null,{default:i(()=>[u(q,{class:"row items-center q-pb-none"},{default:i(()=>[e[12]||(e[12]=r("div",{class:"text-h6"},"Edit Dish",-1)),u(U),V(u(g,{icon:"close",flat:"",round:"",dense:""},null,512),[[Q]])]),_:1,__:[12]}),u(q,{class:"q-pa-lg q-gutter-sm"},{default:i(()=>[u($,{modelValue:n.value.disable,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value.disable=l),label:"Disable"},null,8,["modelValue"]),e[13]||(e[13]=r("div",{class:"q-ma-lg"},null,-1)),u(o,{outlined:"",modelValue:n.value.name,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.name=l),label:"name(pt)",dense:a.dense},null,8,["modelValue","dense"]),u(o,{outlined:"",modelValue:n.value.name_en,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value.name_en=l),label:"name(english)",dense:a.dense},null,8,["modelValue","dense"]),u(o,{outlined:"",modelValue:n.value.name_cn,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.name_cn=l),label:"name(中文)",dense:a.dense},null,8,["modelValue","dense"]),e[14]||(e[14]=r("div",{class:"q-ma-lg"},null,-1)),u(o,{outlined:"",modelValue:n.value.note,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.note=l),label:"descript(pt)",dense:a.dense},null,8,["modelValue","dense"]),u(o,{outlined:"",modelValue:n.value.note_en,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.note_en=l),label:"descript(english)",dense:a.dense},null,8,["modelValue","dense"]),u(o,{outlined:"",modelValue:n.value.note_cn,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.note_cn=l),label:"descript(中文)",dense:a.dense},null,8,["modelValue","dense"]),e[15]||(e[15]=r("div",{class:"q-ma-lg"},null,-1)),u(o,{outlined:"",modelValue:n.value.subname,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.subname=l),label:"subname(pt)",dense:a.dense},null,8,["modelValue","dense"]),u(o,{outlined:"",modelValue:n.value.subname_en,"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.subname_en=l),label:"subname(english)",dense:a.dense},null,8,["modelValue","dense"]),u(o,{outlined:"",modelValue:n.value.subname_cn,"onUpdate:modelValue":e[10]||(e[10]=l=>n.value.subname_cn=l),label:"subname(中文)",dense:a.dense},null,8,["modelValue","dense"]),e[16]||(e[16]=r("div",{class:"q-ma-lg"},null,-1))]),_:1,__:[13,14,15,16]}),u(E,{class:"q-gutter-lg"},{default:i(()=>[u(U),V(u(g,{align:"right",label:"Cancel"},null,512),[[Q]]),V(u(g,{align:"left",color:"primary",label:"Apply",onClick:y},null,512),[[Q]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{W as default};
