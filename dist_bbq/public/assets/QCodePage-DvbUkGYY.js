import{s as U}from"./index-Bn-5yviF.js";import{b as q}from"./index-MfeMOwLv.js";import{s as E}from"./index-Dt_kEjEg.js";import{s as B,C as x,Q as y}from"./CodeMaker-DC2MPGtb.js";import{s as D}from"./index-DCPuJMKM.js";import{h as n,c as C,b as l,a,e as V,f as N,l as T,w as g,F as j,o as f}from"./index-EM-CZ76s.js";import"./index-BtG8bjm2.js";const F={class:"flex flex-wrap justify-content-center w-full h-full"},L={key:0,class:"flex flex-column align-items-center justify-content-center"},S={key:1,class:"flex flex-column align-items-center justify-content-center"},P={class:"flex flex-row"},O={__name:"QCodePage",setup(A){const i=n(!1),v=n(null),p=n(0),b=n(""),_=n(0),r=n(""),m=n(null),w=n(!1);async function k(){const t=document.createElement("canvas");for(let e=p.value;e<=_.value;e++){const c=e<10?`0${e}`:`${e}`,s="https://sushi.xiaoxiong.pt"+b.value+"/client.html?table="+x.SimpleEncode(c);console.log("生成二维码数据: ",s),await y.toCanvas(t,s,{width:300});const u=document.createElement("a");u.download=`${c}.png`,u.href=t.toDataURL("image/png"),u.click(),await new Promise(d=>setTimeout(d,300))}console.log("全部二维码下载完毕")}const R=()=>{if(r.value){let t=window.env.QR_ADDR+x.SimpleEncode(r.value);console.log("The qrcode data: ",t),y.toCanvas(m.value,t,{width:300},e=>{e?console.error(e):w.value=!0})}},$=()=>{if(m.value){const t=document.createElement("a");t.download=`座号-${r.value}-二维码.png`,t.href=m.value.toDataURL("image/png"),t.click()}};function Q(){if(!r.value){v.value.add({severity:"error",summary:"错误",detail:"座位号不能为空",life:3e3});return}R(),v.value.add({severity:"success",summary:"成功",detail:"提交成功！",life:3e3})}return(t,e)=>{const c=B,s=E,u=q,d=U;return f(),C(j,null,[l(c,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o)},null,8,["modelValue"]),a("div",F,[i.value?V("",!0):(f(),C("div",L,[e[5]||(e[5]=a("h2",null,"座号二维码生成器",-1)),l(s,{type:"text",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o)},null,8,["modelValue"]),l(u,{label:"生成二维码",onClick:Q}),l(T(D),{ref_key:"toast",ref:v},null,512),a("div",null,[a("canvas",{ref_key:"qrCanvas",ref:m},null,512)]),w.value?(f(),N(u,{key:0,label:"下载二维码",icon:"pi pi-download",onClick:$})):V("",!0)])),i.value?(f(),C("div",S,[e[9]||(e[9]=a("h2",null,"座号二维码一键生成器",-1)),a("div",P,[l(d,{variant:"on"},{default:g(()=>[l(s,{type:"number",modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=o=>p.value=o)},null,8,["modelValue"]),e[6]||(e[6]=a("label",{for:"on_label"},"请输入起始座号",-1))]),_:1,__:[6]}),l(d,{variant:"on"},{default:g(()=>[l(s,{type:"number",modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=o=>_.value=o)},null,8,["modelValue"]),e[7]||(e[7]=a("label",{for:"on_label"},"请输入最终座号",-1))]),_:1,__:[7]})]),l(d,{variant:"on"},{default:g(()=>[l(s,{type:"text",modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=o=>b.value=o)},null,8,["modelValue"]),e[8]||(e[8]=a("label",{for:"on_label"},"请输入地址",-1))]),_:1,__:[8]}),l(u,{label:"一键生成下载二维码",onClick:k})])):V("",!0)])],64)}}};export{O as default};
