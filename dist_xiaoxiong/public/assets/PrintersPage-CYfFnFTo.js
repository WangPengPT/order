import{d as C,o as k,f as _,a,w as n,e as D,V as I,B as R,n as p,b as r,h as N,C as S,Q as T,j as U,m as q,i as g,a6 as A,ae as B,af as M,k as O,_ as X,$ as E}from"./index-DzLsH4o_.js";import{Q as G,c as x}from"./QTable-BnFihgIv.js";import{Q as j}from"./QSpace-Dp6YQ3Qw.js";import{Q as z,a as V}from"./QItem-BCgLtowF.js";import{a as F}from"./rtl-X7O7lok9.js";import{C as L}from"./ClosePopup-vS9oDtDb.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QItemLabel-aqPNNHGU.js";import"./format-CJebrXOQ.js";const b=r(null),w=r([]),f=r([]),m=r([]),J=[{name:"id",required:!0,label:"id",align:"left",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"curPrinter",required:!0,label:"printer",align:"left",field:e=>e.curPrinter,format:e=>`${e}`,sortable:!0},{name:"menu",required:!1,label:"menu",align:"left",field:e=>e.menu,format:e=>`${e}`,sortable:!0},{name:"onebyone",required:!1,label:"onebyone",align:"left",field:e=>e.every_one,format:e=>`${e}`,sortable:!0}],P=r([]),y=r(!1),v=r(null),c=r(!1);function K(e,o){const u=[""].concat(o.printers);if(w.value=u,b.value=o.curPrinter,m.value.length==0){const t={},i=[{label:"XIAOXIONG® RAMEN",value:"XIAOXIONG® RAMEN"},{label:"Pato assado",value:"Pato assado"}];for(let s=0;s<p.menuData.length;s++){const l=p.menuData[s];l.category&&l.category!=""&&(t[l.category]||(t[l.category]=!0,i.push({label:l.category,value:l.category}))),l.tags&&l.tags!=""&&(t[l.tags]||(t[l.tags]=!0,i.push({label:l.tags,value:l.tags})))}m.value=i,console.log(m.value)}if(o.menu){const t=[];for(let i=0;i<o.menu.length;i++){const s=o.menu[i];let l=!1;for(let d=0;d<m.value.length;d++)m.value[d].value==s&&(l=!0);l&&t.push(s)}f.value=t}else f.value=[];console.log(f.value),v.value=o,c.value=o.every_one=="true",y.value=!0}function W(){const e=v.value,o=b.value,u=f.value;e.curPrinter=o,e.menu=[...u],console.log(c.value),c.value==!0?e.every_one="true":e.every_one="false",console.log(e.id,o,u,e.every_one),p.selectPrinter(e.id,o,u,e.every_one),y.value=!1}function Y(){const e=v.value;p.printTestPage(e.id)}const Z={setup(){return R(()=>{p.getPrinters(e=>{P.value=e})}),{printTest:Y,printer_model:b,printer_options:w,menu_model:f,menu_options:m,selectPrinter:W,onRowClick:K,showDetail:y,selRow:v,filter:r(""),columns:J,rows:P,every_one:c}}},$={class:"q-pa-md"};function ee(e,o,u,t,i,s){return k(),C(I,null,[_("div",$,[a(G,{title:"Printers",rows:t.rows,columns:t.columns,"row-key":"id",filter:t.filter,onRowClick:t.onRowClick},{"top-right":n(()=>[a(N,{borderless:"",dense:"",debounce:"300",modelValue:t.filter,"onUpdate:modelValue":o[0]||(o[0]=l=>t.filter=l),placeholder:"Search"},{append:n(()=>[a(S,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","onRowClick"])]),a(D,{modelValue:t.showDetail,"onUpdate:modelValue":o[6]||(o[6]=l=>t.showDetail=l)},{default:n(()=>[a(T,{bordered:"",class:"rounded-borders",style:{width:"350px"}},{default:n(()=>[a(U,{class:"row items-center q-pb-none"},{default:n(()=>[o[7]||(o[7]=_("div",{class:"text-h6"},"Printer Setting",-1)),a(j),q(a(g,{icon:"close",flat:"",round:"",dense:""},null,512),[[L]])]),_:1,__:[7]}),a(F,{bordered:"",separator:""},{default:n(()=>[a(x,{modelValue:t.printer_model,"onUpdate:modelValue":o[1]||(o[1]=l=>t.printer_model=l),options:t.printer_options,label:"Printer",style:{width:"300px",margin:"5px","margin-left":"25px"}},null,8,["modelValue","options"]),a(A,{modelValue:t.every_one,"onUpdate:modelValue":o[2]||(o[2]=l=>t.every_one=l),label:"one record every page",style:{width:"300px",margin:"5px","margin-left":"25px"}},null,8,["modelValue"]),a(x,{filled:"",modelValue:t.menu_model,"onUpdate:modelValue":o[3]||(o[3]=l=>t.menu_model=l),options:t.menu_options,label:"Menu",multiple:"","emit-value":"","map-options":"",style:{width:"300px",margin:"5px","margin-left":"25px"}},{option:n(({itemProps:l,opt:d,selected:Q,toggleOption:h})=>[a(z,B(M(l)),{default:n(()=>[a(V,null,{default:n(()=>[O(X(d.label),1)]),_:2},1024),a(V,{side:""},{default:n(()=>[a(E,{"model-value":Q,"onUpdate:modelValue":le=>h(d)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),_:1}),a(g,{onClick:o[4]||(o[4]=l=>t.printTest()),style:{width:"200px",margin:"5px","margin-left":"130px"},"icon-right":"print",color:"primary",label:"Print Test"}),a(g,{onClick:o[5]||(o[5]=l=>t.selectPrinter()),style:{width:"200px",margin:"5px","margin-left":"130px"},"icon-right":"ok",color:"primary",label:"Apply"})]),_:1})]),_:1},8,["modelValue"])],64)}const me=H(Z,[["render",ee]]);export{me as default};
